<!doctype html>

<html>
  <head>
    <meta charset='utf-8' />
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <title>test - phina.js</title>
    <meta name="description" content="${description}" />

    <script src="http://cdnjs.cloudflare.com/ajax/libs/jade/1.3.1/jade.min.js"></script>
    <script src="http://rawgit.com/phi-jp/riot/build/dist/riot/riot+compiler.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/superagent/0.15.7/superagent.js"></script>
    <script src="http://cdn.rawgit.com/phi-jp/high/0.0.3/high.js"></script>

    <!-- material design lite -->
    <link rel="stylesheet" href="https://storage.googleapis.com/code.getmdl.io/1.0.0/material.indigo-pink.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script src="https://storage.googleapis.com/code.getmdl.io/1.0.0/material.min.js"></script>
  </head>
  <body>
    <app></app>
  </body>
</html>

<script type='riot/tag' template='jade'>
  app
    div.
      <div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer
                  mdl-layout--overlay-drawer-button">
        <phina-nav sections='{this.sections}'></phina-nav>
        <phina-main></phina-main>
      </div>
    script(type='text/javascript').
      this.sections = opts.sections;
</script>

<script type='riot/tag' template='jade'>
  phina-nav.mdl-layout__drawer
    span.mdl-layout-title Title
    nav.mdl-navigation
      itemgroup(each='{sections}')

    script(type='text/javascript').
      this.sections = opts.sections;
</script>

<script type='riot/tag' template='jade'>
  phina-main.mdl-layout__content
    div.page-content <!-- Your content goes here --> Hello
</script>

<script type='riot/tag' template='jade'>
  itemgroup
    div(class='{opened:this.open}')
      a.mdl-navigation__link(href='', onclick='{toggle}') {name}
        i.material-icons.md-18 keyboard_arrow_down
      nav
        item(each='{items}')

    style(scoped='scoped').
      itemgroup div > a.mdl-navigation__link {
        padding-left: 14px !important;
      }
      itemgroup div.opened > a {
        background: hsl(0, 0%, 90%);
      }
      itemgroup div a.mdl-navigation__link i {
        position: absolute;
        right: 5px;
        -webkit-transition: 200ms;
      }
      itemgroup div.opened a.mdl-navigation__link i {
        -webkit-transform: rotate(-180deg);
      }
      itemgroup nav {
        max-height: 0px;
        overflow: hidden;
        -webkit-transition: 200ms;
      }
      itemgroup .opened nav {
        max-height: 500px;
        overflow: scroll;
        -webkit-transition: 200ms;
      }
    script(type='text/javascript').
      this.open = false;

      this.toggle = function() {
        this.open = !this.open;
      };
</script>

<script type='riot/tag' template='jade'>
  item
    a.mdl-navigation__link {name}
</script>

<script>
  riot.mount('app', {
    sections: [
      {
        name: 'hoge',
        items: [
          {name:'aaaa',},
          {name:'bbbb',},
          {name:'cccc',},
          {name:'dddd',},
        ],
      },
      {
        name: 'foo',
        items: [
          {name:'aaaa',},
          {name:'bbbb',},
          {name:'cccc',},
          {name:'dddd',},
        ],
      },
      {
        name: 'bar',
        items: [
          {name:'aaaa',},
          {name:'bbbb',},
          {name:'cccc',},
          {name:'dddd',},
        ],
      },
    ]
  });
</script>
