<!doctype html>

<html>
<head>
</head>
<body>
  <canvas id='world'></canvas>
</body>
</html>

<style>
#world {
  box-shadow: 0px 0px 4px 0px #aaa;
}
</style>

<script src='../build/phina.js'></script>
<script>

phina.globalize();

var SCREEN_WIDTH  = 640;
var SCREEN_HEIGHT = 960;


phina.define("MainScene", {
  superClass: 'CanvasScene',

  init: function() {
    this.superInit({
      width: SCREEN_WIDTH,
      height: SCREEN_HEIGHT,
    });

    this.group = CanvasElement().addChildTo(this);
    this.group.x = 100;
    this.group.y = 100;
    this.group.rotation = -20;

    var rect = Shape().addChildTo(this.group);
    rect.width = 64;
    rect.x = 100;
    rect.y = 100;
    rect.rotation = 0;
    // rect.scale.x = 2;

    rect.onpointstay = function() {
    	this.fillStyle = 'red';
    };
    rect.onpointend = function() {
    	this.fillStyle = 'blue';
    };


    return ;
    // rect.update = function(app) {
    //   var p = app.pointer;
    //   if (this.hitTest2(p.x, p.y)) {
    //     this.fillStyle = 'blue';
    //   }
    //   else {
    //     this.fillStyle = 'red';
    //   }
    // }
    var rect = Shape().addChildTo(this);
    rect.width = 64;
    rect.x = 200;
    rect.y = 200;
    rect.fillStyle = 'black';
    rect.rotation = -5;
  },

  update: function(app) {
    // console.log(app.pointer.y);
  },

});

var app = CanvasApp({
  query: '#world',
  width: SCREEN_WIDTH,
  height: SCREEN_HEIGHT,
});

app.replaceScene(MainScene());

app.run();

// var mat =    Matrix33(0, -1, 1, -1, 4, -2, 1, 1, 1);
// // var mat = Matrix33(0, -1, 1, -1, 4, -2, 1, -2, 1);
// console.log(mat.determinant());
// var b = mat.clone().invert();
// console.log(b.toString());
// console.log(mat.clone().multiply(b).toString())

</script>