<!doctype html>

<html>
  <head>
    <meta charset='utf-8' />
  </head>
  <body>
  </body>
</html>

<style>
canvas {
  box-shadow: 0px 0px 4px 0px #aaa;
}
</style>

<script src='../build/phina.js'></script>
<script>

phina.globalize();

var SCREEN_WIDTH    = 960;
var SCREEN_HEIGHT   = 640;
var PIECE_SIZE      = 80;
var PIECE_SIZE_HALF = PIECE_SIZE/2;
var FLOOR_HEIGHT    = 128;
var SPEED           = 16;

var TOUCH_SE = 'data:audio/x-m4a;base64,AAAAHGZ0eXBNNEEgAAAAAE00QSBtcDQyaXNvbQAAA2ptb292AAAAbG12aGQAAAAAth9I0bYfSNEAAKxEAAA4AAABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAB/HRyYWsAAABcdGtoZAAAAAG2H0jRth9I0QAAAAEAAAAAAAA4AAAAAAAAAAAAAAAAAAEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAZhtZGlhAAAAIG1kaGQAAAAAth9I0bYfSNEAAKxEAAA4AAAAAAAAAAAiaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAAAAAAABTm1pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABEnN0YmwAAAB2c3RzZAAAAAAAAAABAAAAZm1wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAACsRAAAAAAAM2VzZHMAAAAAA4CAgCIAAAAEgICAFEAVABgAAAAAAAAA+gAFgICAAhIIBoCAgAECAAAAD3NidGQAAAAASTE2AAAAGHN0dHMAAAAAAAAAAQAAAA4AAAQAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAAOAAAAAQAAAExzdHN6AAAAAAAAAAAAAAAOAAAABAAAALYAAADwAAABAAAAASoAAADJAAAAwAAAAL8AAADIAAAAxwAAAMQAAAD0AAAAmAAAACsAAAAUc3RjbwAAAAAAAAABAAAQAAAAAPp1ZHRhAAAA8m1ldGEAAAAAAAAAImhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAAMRpbHN0AAAAvC0tLS0AAAAcbWVhbgAAAABjb20uYXBwbGUuaVR1bmVzAAAAFG5hbWUAAAAAaVR1blNNUEIAAACEZGF0YQAAAAEAAAAAIDAwMDAwMDAwIDAwMDAwODQwIDAwMDAwMzlDIDAwMDAwMDAwMDAwMDJDMjQgMDAwMDAwMDAgMDAwMDAwMDAgMDAwMDAwMDAgMDAwMDAwMDAgMDAwMDAwMDAgMDAwMDAwMDAgMDAwMDAwMDAgMDAwMDAwMDAAAAxyZnJlZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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';
var ASSETS = {
  image: {
    'ground': '../assets/images/flappy/ground.png',
    'background': '../assets/images/flappy/background.png',
    'tube1': '../assets/images/flappy/tube1.png',
    'tube2': '../assets/images/flappy/tube2.png',
    'tomapiko': '../assets/images/tomapiko_ss.png',
  },
  spritesheet: {
    'tomapiko': '../assets/tmss/tomapiko.tmss',
  },
  sound: {
    'touch': TOUCH_SE,
  },
};


phina.define('MainScene', {
  superClass: 'CanvasScene',

  init: function() {
    this.superInit({
      width: SCREEN_WIDTH,
      height: SCREEN_HEIGHT,
    });

    this.fromJSON({
      children: {
        bg: {
          className: 'Sprite',
          arguments: 'background',
          y: -FLOOR_HEIGHT,
          originX: 0,
          originY: 0,
        },
        tubeGroup: {
          className: 'CanvasElement',
        },
        floor: {
          className: 'Floor',
          y: SCREEN_HEIGHT,
        },
        scoreLabel: {
          className: 'Label',
          text: '999',
          x: this.gridX.span(15),
          y: this.gridX.span(1),
          align: 'right',
        }
      },
    });

    this.score = 0;
    this.scoreLabel.text = this.score + '';

    this.player = Player().addChildTo(this);
    this.player.setPosition(this.gridX.span(2), this.gridY.span(8));

    this.onpointstart = function() {
      this.player.fly();
      AssetManager.get('sound', 'touch').play();
    };
  },

  update: function(app) {
    if (app.frame % 60 === 0) {
      this.createTube();
    }

    this.tubeGroup.children.each(function(child) {
      if (this.player.hitTestElement(child)) {
        console.log('hit');
        this.exit();
      }
    }, this);
  },

  createTube: function() {
    var base = Math.randint(180, 360);
    var tube1 = Tube().addChildTo(this.tubeGroup);
    var tube2 = Tube().addChildTo(this.tubeGroup);

    tube1.x = this.gridX.width;
    tube1.y = base - 256;

    tube2.x = this.gridX.width;
    tube2.y = base + 256;
    tube2.scaleY = -1;
  },
});

phina.define('Floor', {
  superClass: 'Shape',

  init: function() {
    this.superInit();

    this.width = SCREEN_WIDTH+64;
    this.height = FLOOR_HEIGHT;
    this.originX = 0;
    this.originY = 1;
    this.padding = 0;

    this.x = 0;
  },
  _render: function() {
    this._renderBackground();

    var c = this.canvas;
    var ground = AssetManager.get('image', 'ground');
    var count = SCREEN_WIDTH/37+1;
    (count).times(function(i) {
      c.context.drawImage(ground.domElement, i*37, 0, 37, FLOOR_HEIGHT);
    });
  },
  update: function() {
    this.x-=SPEED;

    if (this.x < -37) {
      this.x = 0;
    }
  }
});

phina.define('Player', {
  superClass: 'Sprite',

  init: function(index) {
    this.superInit('tomapiko');
    this.scaleX = -1;
    this.anim = FrameAnimation('tomapiko').attachTo(this);
    this.anim.gotoAndPlay('fly');

    this.physical.gravity.set(0, 0.5);
  },

  fly: function() {
    this.physical.force(0, -10);
  },
});

phina.define('Tube', {
  superClass: 'Sprite',

  init: function() {
    this.superInit('tube1');
  },
  update: function() {
    this.x-=SPEED;

    if (this.right < 0) {
      this.remove();
    }
  }
})

phina.main(function() {
  var app = GameApp({
    title: 'phinappy bird',
    width: SCREEN_WIDTH,
    height: SCREEN_HEIGHT,
    assets: ASSETS,
    startLabel: location.search.substr(1).toObject().scene || 'title',
  });

  app.enableStats();

  app.run();
});



</script>